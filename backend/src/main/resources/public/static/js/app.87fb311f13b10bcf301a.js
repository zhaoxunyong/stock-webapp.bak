webpackJsonp([1],{"+KGt":function(t,e){},BYbc:function(t,e){},Bcsb:function(t,e){},LdQD:function(t,e){},MtsD:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("O534"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=n("Aizv")({name:"app"},s,!1,function(t){n("UnKv")},null,null).exports,o=n("1eSk"),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-navbar",{attrs:{type:"dark",variant:"primary",toggleable:""}},[n("b-navbar-toggle",{attrs:{target:"nav_dropdown_collapse"}}),t._v(" "),n("b-collapse",{attrs:{"is-nav":"",id:"nav_dropdown_collapse"}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{href:"#"}},[t._v("Home")]),t._v(" "),n("b-nav-item",{attrs:{href:"#"}},[t._v("Link")]),t._v(" "),n("b-nav-item-dropdown",{attrs:{text:"台股",right:""}},[n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.go("/")}}},[t._v("\n          自選股\n        ")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.go("/importantNews/1")}}},[t._v("\n          重點新聞\n        ")])],1),t._v(" "),n("b-nav-item",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.go("/importantNews/1")}}},[t._v("\n        個性化設置\n      ")])],1)],1)],1)],1)},staticRenderFns:[]};var c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"copy"},[this._v("\n  Copy © wenchun\n")])},staticRenderFns:[]},l={components:{Header:n("Aizv")({data:function(){return{}},created:function(){},methods:{go:function(t){this.$router.push(t)}}},r,!1,function(t){n("BYbc")},"data-v-54b37cf8",null).exports,Footer:n("Aizv")(null,c,!1,null,null,null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Header"),this._v(" "),this._t("default"),this._v(" "),e("Footer")],2)},staticRenderFns:[]},d=n("Aizv")(l,u,!1,null,null,null).exports,p=new a.default,m={data:function(){return{list:[],firstStockId:"",myStockSelectedName:"請選擇自選股",selected:null,options:[]}},created:function(){var t=this;this.getData(),this.getStockMySelectedTypes(),p.$on("getAllMyStockData",function(){t.myStockSelectedName="所有",t.getData()}),p.$on("reGetStockMySelectedTypes",function(){t.getStockMySelectedTypes()}),p.$on("getMyStockSelected",function(e,n){void 0!=e&&(t.myStockSelectedName=n,t.$api.get("/api/stock/getStockMyDatasByType/"+e,null,function(e){if(t.list=e,""!=e){t.firstStockId=e[0].stockId;var n=void 0==t.$route.params.stockId?t.firstStockId:t.$route.params.stockId;t.$router.push("/content/"+t.firstStockId+"/1"),p.$emit("setFirstStock",n),p.$emit("deliverySelectedTypes",e[0].selectedTypes)}else p.$emit("deliverySelectedTypes",[])}))})},methods:{isSelected:function(t){return t==(void 0==this.$route.params.stockId?this.firstStockId:this.$route.params.stockId)?"selected":""},go:function(t,e){this.$router.push("/content/"+t+"/1"),p.$emit("deliverySelectedTypes",e)},toFront:function(){var t=this.$router;$(".selected").each(function(){var e=$(this).closest("span").prev().find("a"),n=e.attr("href"),a=e.attr("data");void 0!=n&&(t.push(n),p.$emit("deliverySelectedTypes",a))})},toBack:function(){var t=this.$router;$(".selected").each(function(){var e=$(this).closest("span").next().find("a"),n=e.attr("href"),a=e.attr("data");void 0!=n&&(t.push(n),p.$emit("deliverySelectedTypes",a))})},clearName:function(){this.selected=""},handleOk:function(t){t.preventDefault(),this.selected?this.handleSubmit():alert("請選擇自選股!")},handleSubmit:function(){var t=void 0==this.$route.params.stockId?this.firstStockId:this.$route.params.stockId;this.changeStockMySelected(t,this.selected),this.clearName(),this.$refs.modal.hide()},getData:function(){var t=this;this.$api.get("/api/stock/getStockMyDatas",null,function(e){t.list=e,t.firstStockId=e[0].stockId;var n=void 0==t.$route.params.stockId?t.firstStockId:t.$route.params.stockId;p.$emit("setFirstStock",n),p.$emit("deliverySelectedTypes",e[0].selectedTypes)})},getStockMySelectedTypes:function(){var t=this;this.options=[];this.$api.get("/api/stock/getStockMySelectedTypes",null,function(e){for(var n=0;n<e.length;n++)t.options.push({value:e[n].type,text:e[n].name})})},changeStockMySelected:function(t,e){var n="/api/stock/changeStockMySelected?stockId="+t+"&selectedType="+e;this.$api.post(n,null,function(t){p.$emit("deliveryOneSelectedType",e)})}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"select_div"}},[n("b-btn",{attrs:{variant:"primary"},on:{click:t.toFront}},[t._v("<-")]),t._v(" "),n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modalPrevent",modifiers:{modalPrevent:!0}}],attrs:{variant:"primary"}},[t._v("+")]),t._v(" "),n("b-btn",{attrs:{variant:"primary"},on:{click:t.toBack}},[t._v("->")]),t._v(" "),n("b-modal",{ref:"modal",attrs:{id:"modalPrevent",title:"請選擇自選股"},on:{ok:t.handleOk,shown:t.clearName}},[n("form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-select",{staticClass:"mb-3",attrs:{options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])],1),t._v(" "),n("div",{staticClass:"selected_name"},[t._v("\n 當前自選股 : "),n("br"),t._v(t._s(t.myStockSelectedName)+"\n  ")]),t._v(" "),t._l(t.list,function(e){return n("span",[n("a",{class:t.isSelected(e.stockId),attrs:{href:"/content/"+e.stockId+"/1",data:e.selectedTypes},on:{click:function(n){n.preventDefault(),t.go(e.stockId,e.selectedTypes)}}},[t._v("\n      "+t._s(e.company)+"\n    ")]),n("br")])})],2)},staticRenderFns:[]};var h={data:function(){return{items:[],selectedTypes:[],firstStockId:"",name:""}},created:function(){var t=this;this.getData(),p.$on("deliverySelectedTypes",function(e){t.selectedTypes=e}),p.$on("deliveryOneSelectedType",function(e){t.selectedTypes.push(e)}),p.$on("setFirstStock",function(e){t.firstStockId=e})},methods:{getAllMyStockData:function(){this.selectedTypes=[],p.$emit("getAllMyStockData")},getMyStockSelected:function(t,e){p.$emit("getMyStockSelected",t,e)},removeStockMySelected:function(t,e){var n=void 0==this.$route.params.stockId?this.firstStockId:this.$route.params.stockId,a=this.$api;this.$confirm("是否確定從"+e+"中移除?").then(function(){var s="/api/stock/removeStockMySelected?stockId="+n+"&selectedType="+t;a.post(s,null,function(n){p.$emit("getMyStockSelected",t,e)})}).catch(function(t){console.log("Exception---\x3e"+t)})},isSelected:function(t){return null!=this.selectedTypes&&-1!=this.selectedTypes.indexOf(t)?"warning":"success"},clearName:function(){this.name="",this.$refs.focusThis.focus()},handleOk:function(t){t.preventDefault(),this.name?this.handleSubmit():alert("请输入自選股名称!")},handleSubmit:function(){this.saveData(this.name),this.clearName(),this.$refs.modal.hide()},getData:function(){var t=this;this.$api.get("/api/stock/getStockMySelectedTypes",null,function(e){t.items=e})},saveData:function(t){var e=this,n="/api/stock/saveStockMySelectedType?name="+t;this.$api.post(n,null,function(t){e.getData(),p.$emit("reGetStockMySelectedTypes")})}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[n("b-button",{attrs:{variant:"success"},on:{click:t.getAllMyStockData}},[t._v("\n      所有\n  ")])],1),t._v(" "),t._l(t.items,function(e){return n("span",[n("b-button",{attrs:{variant:t.isSelected(e.type),id:e.type},on:{click:function(n){t.getMyStockSelected(e.type,e.name)}}},[t._v("\n      "+t._s(e.name)+"\n      "),"warning"==t.isSelected(e.type)?n("span",{attrs:{"aria-hidden":"true"},on:{click:function(n){n.preventDefault(),t.removeStockMySelected(e.type,e.name)}}},[t._v("×")]):t._e()])],1)}),t._v(" "),n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modalPrevent2",modifiers:{modalPrevent2:!0}}],attrs:{variant:"success"}},[t._v("+")]),t._v(" "),n("b-modal",{ref:"modal",attrs:{id:"modalPrevent2",title:"请输入自選股名称"},on:{ok:t.handleOk,shown:t.clearName}},[n("form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-input",{ref:"focusThis",attrs:{type:"text",placeholder:"输入自選股名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)])],2)},staticRenderFns:[]};var g=[],k={data:function(){return{items:[],stockId:"",numberOfPages:0,currentPage:this.$route.params.pageNum,pageSize:10}},created:function(){var t=this;p.$on("setFirstStock",function(e){t.getData(e)})},mounted:function(){},methods:{linkGen:function(t){return{path:"/content/"+this.stockId+"/"+t}},getData:function(t){var e=this;g=[],t=void 0==t?this.$route.params.stockId:t,this.stockId=t;var n="/api/stock/getNewsBystockId/"+t+"/"+(void 0==this.$route.params.pageNum?1:this.$route.params.pageNum)+"/"+this.pageSize;this.$api.get(n,null,function(t){e.numberOfPages=t.pageTotal,$(t.rows).each(function(){var t='<a target="_blank" href="'+this.url+'">'+this.subject+"</a>";g.push({"個股新聞與研究報告":t})}),e.items=g})}},watch:{$route:function(t,e){var n=this;g=[];var a=void 0==this.$route.params.pageNum?1:this.$route.params.pageNum,s="/api/stock/getNewsBystockId/"+this.$route.params.stockId+"/"+a+"/"+this.pageSize;this.$api.get(s,null,function(t){n.numberOfPages=t.pageTotal,$(t.rows).each(function(){var t='<a target="_blank" href="'+this.url+'">'+this.subject+"</a>";g.push({"個股新聞與研究報告":t})}),n.items=g})}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{attrs:{striped:"",hover:"",items:t.items}}),t._v(" "),n("b-pagination-nav",{attrs:{align:"center","number-of-pages":t.numberOfPages,"base-url":"#","link-gen":t.linkGen},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},staticRenderFns:[]},y={data:function(){return{dismissSecs:5,dismissCountDown:0,err:""}},created:function(){var t=this;p.$on("alerts",function(e){t.err=e.response.statusText+" : "+e.response.data,t.showAlert()})},methods:{countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",variant:"danger",title:"Error"},on:{dismissed:function(e){t.dismissCountdown=0},"dismiss-count-down":t.countDownChanged}},[t._v("\n    "+t._s(t.err)+"\n    \n  ")])],1)},staticRenderFns:[]},_={data:function(){return{dismissDown:!0,err:""}},created:function(){var t=this;p.$on("loading",function(e){t.dismissDown=e,e?$("#loading_div").show():$("#loading_div").hide()})}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"loading_div"}},[e("b-progress",{staticClass:"mb-3",attrs:{value:100,variant:"success",animated:!0,"show-value":this.dismissDown,"show-progress":this.dismissDown}})],1)},staticRenderFns:[]},T={components:{MainLayout:d,StockMyData:n("Aizv")(m,f,!1,function(t){n("OZ7M")},"data-v-4103d0ea",null).exports,StockMySelectedType:n("Aizv")(h,v,!1,function(t){n("Bcsb")},"data-v-33ca056f",null).exports,StockNews:n("Aizv")(k,S,!1,null,null,null).exports,Alert:n("Aizv")(y,b,!1,null,null,null).exports,Loading:n("Aizv")(_,w,!1,null,null,null).exports}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("main-layout",[e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{staticStyle:{"box-shadow":"inset 1px -1px 1px #444, inset -1px 1px 1px #444"},attrs:{xl:"2",sm:"2",md:"2",lg:"2"}},[e("stock-my-data")],1),this._v(" "),e("b-col",{staticStyle:{"box-shadow":"inset 1px -1px 1px #444, inset -1px 1px 1px #444"},attrs:{xl:"10",sm:"10",md:"10",lg:"10"}},[e("stock-my-selected-type"),this._v(" "),e("Alert"),this._v(" "),e("Loading"),this._v(" "),e("stock-news")],1)],1)],1)],1)},staticRenderFns:[]},x=n("Aizv")(T,D,!1,null,null,null).exports,I=[],N={components:{MainLayout:d},data:function(){return{items:[],numberOfPages:0,currentPage:this.$route.params.pageNum,pageSize:10}},created:function(){this.getData()},methods:{linkGen:function(t){return{path:"/importantNews/"+t}},getData:function(){var t=this;I=[];var e="/api/stock/getImportantNews/"+this.$route.params.pageNum+"/"+this.pageSize;this.$api.get(e,null,function(e){t.numberOfPages=e.pageTotal,$(e.rows).each(function(){var t='<a target="_blank" href="'+this.url+'">'+this.froms+"</a>";I.push({"重點新聞":t})}),t.items=I})}},watch:{$route:function(t,e){var n=this;I=[];var a="/api/stock/getImportantNews/"+this.$route.params.pageNum+"/"+this.pageSize;this.$api.get(a,null,function(t){n.numberOfPages=t.pageTotal,$(t.rows).each(function(){var t='<a target="_blank" href="'+this.url+'">'+this.froms+"</a>";I.push({"重點資訊":t})}),n.items=I})}}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main-layout",[[n("b-table",{attrs:{striped:"",hover:"",items:t.items}}),t._v(" "),n("b-pagination-nav",{attrs:{align:"center","number-of-pages":t.numberOfPages,"base-url":"#","link-gen":t.linkGen},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})]],2)},staticRenderFns:[]},P=n("Aizv")(N,M,!1,null,null,null).exports;a.default.use(o.a);var A=new o.a({mode:"hash",routes:[{path:"/",component:x},{path:"/content/:stockId",component:x,children:[{path:":pageNum",component:x}]},{path:"/importantNews/:pageNum",component:P}]}),E=n("N7z7"),O=(n("h8gv"),n("pltS"),n("P1wC")),F=n.n(O),z="/",C=n("gCy3");function R(t,e,n,a,s){C({method:t,url:e,data:"POST"===t||"PUT"===t?n:null,params:"GET"===t||"DELETE"===t?n:null,baseURL:z,withCredentials:!1}).then(function(t){console.log("res.data----\x3e"+t.data),a(t.data),p.$emit("loading",!1)}).catch(function(t){p.$emit("loading",!1),t&&p.$emit("alerts",t)})}var B={get:function(t,e,n,a){return R("GET",t,e,n)},post:function(t,e,n,a){return R("POST",t,e,n)},put:function(t,e,n,a){return R("PUT",t,e,n)},delete:function(t,e,n,a){return R("DELETE",t,e,n)}},G={goodTime:function(t){var e=(new Date).getTime()-new Date(t).getTime(),n=e/31104e6,a=e/2592e6,s=e/6048e5,i=e/864e5,o=e/36e5,r=e/6e4;return n>=1?"发表于 "+~~n+" 年前":a>=1?"发表于 "+~~a+" 个月前":s>=1?"发表于 "+~~s+" 周前":i>=1?"发表于 "+~~i+" 天前":o>=1?"发表于 "+~~o+" 个小时前":r>=1?"发表于 "+~~r+" 分钟前":"刚刚"}};a.default.use(E.a),a.default.use(F.a),a.default.prototype.$api=B,a.default.prototype.$utils=G,a.default.config.productionTip=!1,new a.default({el:"#app",router:A,components:{App:i},template:"<App/>"})},OZ7M:function(t,e){},UnKv:function(t,e){},h8gv:function(t,e){},pltS:function(t,e){}},["NHnr"]);