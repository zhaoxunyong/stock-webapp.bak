webpackJsonp([1],{"+KGt":function(t,e){},"1Ygv":function(t,e){},LdQD:function(t,e){},MtsD:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("O534"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=n("Aizv")({name:"app"},s,!1,function(t){n("UnKv")},null,null).exports,o=n("1eSk"),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-navbar",{attrs:{type:"dark",variant:"primary",toggleable:""}},[n("b-navbar-toggle",{attrs:{target:"nav_dropdown_collapse"}}),t._v(" "),n("b-collapse",{attrs:{"is-nav":"",id:"nav_dropdown_collapse"}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{href:"#"}},[t._v("Home")]),t._v(" "),n("b-nav-item",{attrs:{href:"#"}},[t._v("Link")]),t._v(" "),n("b-nav-item-dropdown",{attrs:{text:"台股",right:""}},[n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.go("/")}}},[t._v("\n          自選股\n        ")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.go("/importantNews/1")}}},[t._v("\n          重點新聞\n        ")])],1),t._v(" "),n("b-nav-item-dropdown",{attrs:{text:"個性化設置",right:""}},[n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.go("/stockDailyTransactions")}}},[t._v("\n          每天買入賣出股\n        ")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"copy"},[this._v("\n  Copy © wenchun\n")])},staticRenderFns:[]},l={components:{Header:n("Aizv")({data:function(){return{}},created:function(){},methods:{go:function(t){this.$router.push(t)}}},r,!1,function(t){n("1Ygv")},"data-v-4fd017d9",null).exports,Footer:n("Aizv")(null,c,!1,null,null,null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Header"),this._v(" "),this._t("default"),this._v(" "),e("Footer")],2)},staticRenderFns:[]},d=n("Aizv")(l,u,!1,null,null,null).exports,p=new a.default,f={data:function(){return{list:[],firstStockId:"",myStockSelectedName:"所有",selected:null,options:[]}},created:function(){var t=this;this.getData(),this.getStockMySelectedTypes(),p.$on("getAllMyStockData",function(){t.myStockSelectedName="所有",t.getData()}),p.$on("reGetStockMySelectedTypes",function(){t.getStockMySelectedTypes()}),p.$on("getMyStockSelected",function(e,n){void 0!=e&&(t.myStockSelectedName=n,t.$api.get("/api/stock/getStockMyDatasByType/"+e,null,function(e){t.list=e,void 0!=e&&e.length>0?(t.firstStockId=e[0].stockId,t.$router.push("/content/"+t.firstStockId+"/1")):(t.$router.push("/content/0/1"),p.$emit("emptyNews"))}))})},methods:{isSelected:function(t){return t==(void 0==this.$route.params.stockId?this.firstStockId:this.$route.params.stockId)?"selected":""},go:function(t){this.$router.push("/content/"+t+"/1")},toFront:function(){var t=this.$router;$(".selected").each(function(){var e=$(this).closest("span").prev().find("a").attr("href");void 0!=e&&t.push(e)})},toBack:function(){var t=this.$router;$(".selected").each(function(){var e=$(this).closest("span").next().find("a").attr("href");void 0!=e&&t.push(e)})},clearName:function(){this.selected=""},handleOk:function(t){t.preventDefault(),this.selected?this.handleSubmit():alert("請選擇自選股!")},handleSubmit:function(){var t=void 0==this.$route.params.stockId?this.firstStockId:this.$route.params.stockId;this.changeStockMySelected(t,this.selected),this.clearName(),this.$refs.modal.hide()},getData:function(){var t=this;this.$api.get("/api/stock/getStockMyDatas",null,function(e){t.list=e,t.firstStockId=e[0].stockId;var n=void 0==t.$route.params.stockId||0==t.$route.params.stockId?t.firstStockId:t.$route.params.stockId;t.$router.push("/content/"+n+"/1")})},getStockMySelectedTypes:function(){var t=this;this.options=[];this.$api.get("/api/stock/getStockMySelectedTypes",null,function(e){for(var n=0;n<e.length;n++)t.options.push({value:e[n].type,text:e[n].name})})},changeStockMySelected:function(t,e){var n=this,a="/api/stock/changeStockMySelected?stockId="+t+"&selectedType="+e;this.$api.post(a,null,function(e){n.$router.push("/content/"+t+"/1")})}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"select_div"}},[n("b-btn",{attrs:{variant:"primary"},on:{click:t.toFront}},[t._v("<-")]),t._v(" "),n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modalPrevent",modifiers:{modalPrevent:!0}}],attrs:{variant:"primary"}},[t._v("+")]),t._v(" "),n("b-btn",{attrs:{variant:"primary"},on:{click:t.toBack}},[t._v("->")]),t._v(" "),n("b-modal",{ref:"modal",attrs:{id:"modalPrevent",title:"請選擇自選股"},on:{ok:t.handleOk,shown:t.clearName}},[n("form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-select",{staticClass:"mb-3",attrs:{options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])],1),t._v(" "),n("div",{staticClass:"selected_name"},[t._v("\n 當前自選股 : "),n("br"),t._v(t._s(t.myStockSelectedName)+"\n  ")]),t._v(" "),t._l(t.list,function(e){return n("span",[n("a",{class:t.isSelected(e.stockId),attrs:{href:"/content/"+e.stockId+"/1"},on:{click:function(n){n.preventDefault(),t.go(e.stockId)}}},[t._v("\n      "+t._s(e.company)+"\n    ")]),n("br")])})],2)},staticRenderFns:[]};var h=n("Aizv")(f,m,!1,function(t){n("O4qX")},"data-v-678a5b1f",null).exports,v={data:function(){return{items:[],selectedTypes:[],name:""}},created:function(){this.autoSelectedTypes(),this.getData()},methods:{autoSelectedTypes:function(){var t=this;this.selectedTypes=[];var e=this.$route.params.stockId;void 0!=e&&""!=e&&this.$api.get("/api/stock/getMySelectedTypesByStockId/"+e,null,function(e){if(void 0!=e&&e.length>0)for(var n=0;n<e.length;n++){var a=e[n].type;t.selectedTypes.push(a)}})},getAllMyStockData:function(){this.selectedTypes=[],p.$emit("getAllMyStockData")},getMyStockSelected:function(t,e){p.$emit("getMyStockSelected",t,e)},removeStockMySelected:function(t,e){var n=this.$route.params.stockId,a=this.$api;this.$confirm("是否確定從"+e+"中移除?").then(function(){var s="/api/stock/removeStockMySelected?stockId="+n+"&selectedType="+t;a.post(s,null,function(n){p.$emit("getMyStockSelected",t,e)})}).catch(function(t){console.log("Exception---\x3e"+t)})},isSelected:function(t){return null!=this.selectedTypes&&-1!=this.selectedTypes.indexOf(t)?"warning":"success"},clearName:function(){this.name="",this.$refs.focusThis.focus()},handleOk:function(t){t.preventDefault(),this.name?this.handleSubmit():alert("请输入自選股名称!")},handleSubmit:function(){this.saveData(this.name),this.clearName(),this.$refs.modal.hide()},getData:function(){var t=this;this.$api.get("/api/stock/getStockMySelectedTypes",null,function(e){t.items=e})},saveData:function(t){var e=this,n="/api/stock/saveStockMySelectedType?name="+t;this.$api.post(n,null,function(t){e.getData(),p.$emit("reGetStockMySelectedTypes")})}},watch:{$route:function(t,e){this.autoSelectedTypes()}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[n("b-button",{attrs:{variant:"success"},on:{click:t.getAllMyStockData}},[t._v("\n      所有\n  ")])],1),t._v(" "),t._l(t.items,function(e){return n("span",[n("b-button",{attrs:{variant:t.isSelected(e.type),id:e.type},on:{click:function(n){t.getMyStockSelected(e.type,e.name)}}},[t._v("\n      "+t._s(e.name)+"\n      "),"warning"==t.isSelected(e.type)?n("span",{attrs:{"aria-hidden":"true"},on:{click:function(n){n.preventDefault(),t.removeStockMySelected(e.type,e.name)}}},[t._v("×")]):t._e()])],1)}),t._v(" "),n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modalPrevent2",modifiers:{modalPrevent2:!0}}],attrs:{variant:"success"}},[t._v("+")]),t._v(" "),n("b-modal",{ref:"modal",attrs:{id:"modalPrevent2",title:"请输入自選股名称"},on:{ok:t.handleOk,shown:t.clearName}},[n("form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-input",{ref:"focusThis",attrs:{type:"text",placeholder:"输入自選股名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)])],2)},staticRenderFns:[]};var k=n("Aizv")(v,g,!1,function(t){n("cudb")},"data-v-0ec595cf",null).exports,y={data:function(){return{company:"",stockId:"",numberOfPages:0,currentPage:this.$route.params.pageNum,pageSize:10,fields:{content_title:{label:'<span id="content_id">: </span>個股新聞與研究報告',sortable:!0}},items:[]}},created:function(){var t=this;this.getData(),p.$on("emptyNews",function(){t.cleanNews()})},mounted:function(){},methods:{linkGen:function(t){return{path:"/content/"+this.stockId+"/"+t}},cleanNews:function(){this.items=[],$("#content_id").text(""),this.numberOfPages=0,this.currentPage=1},getData:function(){var t=this;this.stockId=this.$route.params.stockId,void 0!=this.stockId&&""!=this.stockId&&0!=this.stockId&&this.$api.get("/api/stock/getStockData/"+this.stockId,null,function(e){t.company=e.company;var n=void 0==t.$route.params.pageNum?1:t.$route.params.pageNum,a="/api/stock/getNewsBystockId/"+t.stockId+"/"+n+"/"+t.pageSize;t.$api.get(a,null,function(e){t.numberOfPages=e.pageTotal;var n=e.rows;t.items=[];for(var a=0;a<n.length;a++){var s='<a target="_blank" href="'+n[a].url+'">'+n[a].subject+"</a>";t.items.push({content_title:s})}}),$("#content_id").text(t.company+": ")})}},watch:{$route:function(t,e){var n=this;this.stockId=this.$route.params.stockId,0!=this.stockId?this.$api.get("/api/stock/getStockData/"+this.stockId,null,function(t){n.company=t.company,console.log("company---\x3e"+n.company);var e=void 0==n.$route.params.pageNum?1:n.$route.params.pageNum,a="/api/stock/getNewsBystockId/"+n.stockId+"/"+e+"/"+n.pageSize;n.$api.get(a,null,function(t){n.items=[],n.numberOfPages=t.pageTotal;for(var e=t.rows,a=0;a<e.length;a++){var s='<a target="_blank" href="'+e[a].url+'">'+e[a].subject+"</a>";n.items.push({content_title:s})}}),$("#content_id").text(n.company+": ")}):this.cleanNews()}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{attrs:{striped:"",hover:"",items:t.items,fields:t.fields}}),t._v(" "),n("b-pagination-nav",{attrs:{align:"center","number-of-pages":t.numberOfPages,"base-url":"#","link-gen":t.linkGen},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},staticRenderFns:[]},_=n("Aizv")(y,b,!1,null,null,null).exports,S={data:function(){return{dismissSecs:10,dismissCountDown:0,message:"",variant:""}},created:function(){var t=this;p.$on("alerts",function(e){t.message=e,t.variant="danger",t.showAlert()}),p.$on("success",function(e){t.message=e,t.variant="success",t.showAlert()})},methods:{countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",variant:t.variant,title:"Error"},on:{dismissed:function(e){t.dismissCountdown=0},"dismiss-count-down":t.countDownChanged}},[t._v("\n    "+t._s(t.message)+"\n    \n  ")])],1)},staticRenderFns:[]},D=n("Aizv")(S,w,!1,null,null,null).exports,x={data:function(){return{dismissDown:!0,err:""}},created:function(){var t=this;p.$on("loading",function(e){t.dismissDown=e,e?$("#loading_div").show():$("#loading_div").hide()})}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"loading_div"}},[e("b-progress",{staticClass:"mb-3",attrs:{value:100,variant:"success",animated:!0,"show-value":this.dismissDown,"show-progress":this.dismissDown}})],1)},staticRenderFns:[]},I={components:{MainLayout:d,StockMyData:h,StockMySelectedType:k,StockNews:_,Alert:D,Loading:n("Aizv")(x,T,!1,null,null,null).exports}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("main-layout",[e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{staticStyle:{"box-shadow":"inset 1px -1px 1px #444, inset -1px 1px 1px #444"},attrs:{xl:"2",sm:"2",md:"2",lg:"2"}},[e("stock-my-data")],1),this._v(" "),e("b-col",{staticStyle:{"box-shadow":"inset 1px -1px 1px #444, inset -1px 1px 1px #444"},attrs:{xl:"10",sm:"10",md:"10",lg:"10"}},[e("stock-my-selected-type"),this._v(" "),e("Alert"),this._v(" "),e("Loading"),this._v(" "),e("stock-news")],1)],1)],1)],1)},staticRenderFns:[]},P=n("Aizv")(I,N,!1,null,null,null).exports,M=[],A={components:{MainLayout:d},data:function(){return{items:[],numberOfPages:0,currentPage:this.$route.params.pageNum,pageSize:10}},created:function(){this.getData()},methods:{linkGen:function(t){return{path:"/importantNews/"+t}},getData:function(){var t=this;M=[];var e="/api/stock/getImportantNews/"+this.$route.params.pageNum+"/"+this.pageSize;this.$api.get(e,null,function(e){t.numberOfPages=e.pageTotal,$(e.rows).each(function(){var t='<a target="_blank" href="'+this.url+'">'+this.froms+"</a>";M.push({"重點新聞":t})}),t.items=M})}},watch:{$route:function(t,e){var n=this;M=[];var a="/api/stock/getImportantNews/"+this.$route.params.pageNum+"/"+this.pageSize;this.$api.get(a,null,function(t){n.numberOfPages=t.pageTotal,$(t.rows).each(function(){var t='<a target="_blank" href="'+this.url+'">'+this.froms+"</a>";M.push({"重點資訊":t})}),n.items=M})}}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main-layout",[[n("b-table",{attrs:{striped:"",hover:"",items:t.items}}),t._v(" "),n("b-pagination-nav",{attrs:{align:"center","number-of-pages":t.numberOfPages,"base-url":"#","link-gen":t.linkGen},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})]],2)},staticRenderFns:[]},O=n("Aizv")(A,E,!1,null,null,null).exports,z={components:{MainLayout:d,Alert:D},data:function(){return{file:null,items:[]}},created:function(){this.getData()},methods:{update:function(t){var e=this,n=t.target.files[0];p.$emit("success","正在導入數據, 請稍候......"),this.$api.fileUpload(n,"/api/stock/uploadStockDailyTransactions",function(t){p.$emit("success","導入成功!"),e.getData()}),this.$refs.fileinput.reset()},getData:function(){var t=this;this.$api.get("/api/stock/getStockDailyTransactions",null,function(e){for(var n=0;n<e.length;n++){var a=e[n];t.items.push({"成交日期":a.txDate,"股票名稱":"["+a.no+"] "+a.company,"交易種類":a.txKind,"成交數量":a.quantity,"成交價格":a.txPrice,"成交金額":a.txAmount,"手續費":a.fee,"交易稅":a.txTallage,"證所稅":a.zsTallage,"融資金額":a.financingAmount,"利息":a.interest,"借券費":a.debFee,"客戶淨收付":a.customerCharge,"損益":a.profit,"報酬率(%)":a.payRate,"持有成本":a.holdingCost})}})}},watch:{$route:function(t,e){}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main-layout",[[n("div",[n("Alert"),t._v(" "),n("b-container",{staticClass:"bv-example-row",attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{id:"row_title"}},[t._v("  請選擇需要導入的每天買入賣出股文件:")])],1),t._v(" "),n("b-row",[n("b-col",[n("b-form-file",{ref:"fileinput",attrs:{id:"file1",placeholder:"Please choose a file."},on:{change:t.update},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1)],1),t._v(" "),n("div",{attrs:{id:"row_title"}},[t._v("每天買入賣出股列表：")]),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",items:t.items}})],1)]],2)},staticRenderFns:[]};var F=n("Aizv")(z,C,!1,function(t){n("UEOm")},"data-v-9a8593b8",null).exports;a.default.use(o.a);var R=new o.a({mode:"hash",routes:[{path:"/",component:P},{path:"/content/:stockId",component:P,children:[{path:":pageNum",component:P}]},{path:"/importantNews/:pageNum",component:O},{path:"/stockDailyTransactions",component:F}]}),L=n("N7z7"),G=(n("h8gv"),n("pltS"),n("P1wC")),U=n.n(G),B="/",H=n("gCy3");function K(t,e,n,a,s){H({method:t,url:e,data:"POST"===t||"PUT"===t?n:null,params:"GET"===t||"DELETE"===t?n:null,baseURL:B,withCredentials:!1}).then(function(t){console.log("res.data----\x3e"+t.data),a&&a(t.data),p.$emit("loading",!1)}).catch(function(t){if(p.$emit("loading",!1),t){var e=t.response.statusText+" : "+t.response.data;p.$emit("alerts",e),s&&s(t)}})}var j={get:function(t,e,n,a){return K("GET",t,e,n,a)},post:function(t,e,n,a){return K("POST",t,e,n,a)},put:function(t,e,n,a){return K("PUT",t,e,n,a)},delete:function(t,e,n,a){return K("DELETE",t,e,n,a)},fileUpload:function(t,e,n,a){return function(t,e,n,a){var s=new FormData;s.append("file",t,t.name),s.append("chunk","0"),H.post(e,s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t.data),n&&n(t.data)}).catch(function(t){console.log(t);var e=t.response.statusText+" : "+t.response.data;p.$emit("alerts",e),a&&a(t)})}(t,e,n,a)}},q={goodTime:function(t){var e=(new Date).getTime()-new Date(t).getTime(),n=e/31104e6,a=e/2592e6,s=e/6048e5,i=e/864e5,o=e/36e5,r=e/6e4;return n>=1?"发表于 "+~~n+" 年前":a>=1?"发表于 "+~~a+" 个月前":s>=1?"发表于 "+~~s+" 周前":i>=1?"发表于 "+~~i+" 天前":o>=1?"发表于 "+~~o+" 个小时前":r>=1?"发表于 "+~~r+" 分钟前":"刚刚"}};a.default.use(L.a),a.default.use(U.a),a.default.prototype.$api=j,a.default.prototype.$utils=q,a.default.config.productionTip=!1,new a.default({el:"#app",router:R,components:{App:i},template:"<App/>"})},O4qX:function(t,e){},UEOm:function(t,e){},UnKv:function(t,e){},cudb:function(t,e){},h8gv:function(t,e){},pltS:function(t,e){}},["NHnr"]);